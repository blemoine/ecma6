<!DOCTYPE html>
<html>
<head>
    <title>ECMAScript 6 - Preview</title>

    <meta charset="utf-8">

    <link rel="stylesheet" href="pp.css"/>
    <link rel="stylesheet" href="shCore.css"/>
    <link rel="stylesheet" href="shThemeDefault.css"/>
    <script src="jquery.min.js"></script>
    <script src="shCore.js"></script>
    <script src="shBrushJScript.js"></script>
</head>
<body>
<div id="impress">
    <div id="e11" class="step slide section" data-x="0" data-y="0" >
          <h1>ECMAScript 6 - Le futur de javascript</h1>

          <div class="js-logo" title="logo moche"><span>JS</span></div>
    </div>

    <div id="e12" class="step slide section" data-x="1500" data-y="0" >
        <h1>ECMAScript - C'est quoi ?</h1>
        <br />
        <ul class="bulletPoint">
            <li>Langage de programmation standardisé par Ecma International (ECMA-262)</li>
            <li>Javascript est un dialecte de ECMAScript (au même titre qu'ActionScript, par ex.)</li>
            <li>La plupart des navigateurs modernes implementent un dérivé d'ECMAScript 5</li>
        </ul>
    </div>

    <div id="e21" class="step slide section" data-x="0" data-y="1500" >
        <h1>Les fonctionnalités qui ont une forte probabilité d'arriver</h1>
        <br />
        <ul class="bulletPoint">
            <li>Spécification non définitive</li>
            <li>Pas de dates annoncées</li>
        </ul>
    </div>

    <div id="e22" class="step slide section" data-x="1500" data-y="1500" >
        <h1>Syntaxe des fonctions</h1>
        <br />
        <p>Pour la fonction suivante&nbsp;:</p>
        <pre class="brush: js">
var adder = function(a,b) { return a + b; };
        </pre>
        <p>2 propositions&nbsp; de nouvelle syntaxe&nbsp;:</p>
        <pre class="brush: js">
//Aurait pu s'écrire
var adder = {|a, b| a + b};

//Mais s'écrira plus probablement
var adder = (a, b) => a + b
        </pre>
    </div>

    <div id="e23" class="step slide section" data-x="3000" data-y="1500" >
        <h1>Assignement destructuré, valeur par défaut</h1>
        <br />
        <pre class="brush: js">
            var a = 5;
            var b = 6;

            var [c, d] = [a, b];
            // la variable c vaut maintenant 5,
            // et la variable d vaut 6

            var getCoord = function() { return {x:1, y:2}; };

            var {x:e,y:f} = getCoord();
            // e vaut maintenant 1, f vaut 2

        </pre>
    </div>

    <div id="e23b" class="step slide section" data-x="3000" data-y="-1500">
        <h1>Valeur par défaut</h1>
        <br />
        <pre class="brush: js">
            var add = function(x = 0, y = 0) { return x + y; };

            //Affiche 2
            console.log(add(2));

            // Affiche 0
            console.log(add());
        </pre>
    </div>

    <div id="e24" class="step slide section" data-x="4500" data-y="1500" >
        <h1>Scope</h1>
        <br />
        <p><i>Scoping</i> au block</p>
        <pre class="brush: js">


if (a == 2) {
   var c = 4;
   let b = 3;

   console.log(c); // Affichera 4
   console.log(b); // Affichera 3
}

console.log(c); //Affichera 4
console.log(b); //Affichera undefined

        </pre>
    </div>

    <div id="e24b" class="step slide section" data-x="4500" data-y="-1500" >
        <h1>Constante</h1>
        <br />

        <pre class="brush: js">
if (true) {
  const a = 2;

  try {
    //Lance une exception
    a = 5;
  } catch (e) {
  }
}

// const scope au bloc
//on peut donc réaffecter a
a = 6;
        </pre>
    </div>

    <div id="e25" class="step slide section" data-x="6000" data-y="1500" >
        <h1>Rest</h1>
        <br />
        <pre class="brush: js">
function adder(...numbers) {
   let result = 0;

   // numbers est un tableau,
   // contrairement à arguments
   numbers.forEach(function(number) {
      result += number;
   });

   return result;
}
console.log(adder(1,2,3,4)); // affiche 10
        </pre>
    </div>

    <div id="e26" class="step slide section" data-x="7500" data-y="1500" >
        <h1>Spread</h1>
        <br />
        <pre class="brush: js">
function adder(a, b, c, d) {
   return a + b + c + d;
}
console.log(adder(...[1,2,3,4])); // affiche 10
        </pre>
    </div>

    <div id="e27" class="step slide section" data-x="9000" data-y="1500" >
        <h1>Proxy</h1>
        <br />
        <pre class="brush: js">
var point = {x:1, y:4};
var proxifiedObject = Proxy(point, {
     get: function(target, name, receiver) {
            console.log(name+" is called");
            return target[name];
     }
});

// va écrire dans la console "x is called",
//   et x vaudra 1
var x = proxifiedObject.x;
        </pre>
    </div>

    <div id="e28" class="step slide section" data-x="10500" data-y="1500" >
        <h1>Map</h1>
        <br />
        <pre class="brush: js">
var map = Map([["janvier",31],["fevrier",28]]);

map.set("mars", 31);
console.log(map.get("janvier")); //renvoie 31

map.delete("fevrier");

for (let [key,val] of map) {}
        </pre>
    </div>

    <div id="e29" class="step slide section" data-x="12000" data-y="1500" >
        <h1>Set</h1>
        <br />
        <pre class="brush: js">
var set = Set(["un", "trois", "un"]);
console.log(set.size()); // renvoie 2

console.log(set.add("deux"));
console.log(set.has("deux")); //renvoie true

for (let elem of set) {
     console.log(element);
}

        </pre>
    </div>

    <div id="e30" class="step slide section" data-x="13500" data-y="1500" >
        <h1>Itération : For of</h1>
        <br />
        <pre class="brush: js">
            //Parcours les valeurs plutôt que les index
            for (word of ["one", "two", "three"]) {
               console.log(word);
            }

            //Renvoit un tableau des carrés de la liste
            [ square(x) for (x of [1,2,3,4,5]) ]

        </pre>
    </div>

    <div id="e31" class="step slide section" data-x="15000" data-y="1500" >
        <h1>Itération : For of - iterator</h1>
        <div class="mini">
        <pre class="brush: js">
//Un objet est itérable s'il a une méthode iterator
function MyCollection() { this.elements = []; }
MyCollection.prototype = {
    add: function(x) { this.elements.push(x) },
    iterator: function() {
        return {
          elements: this.elements,
          index: 0,
          next: function() {
            if (this.index >= this.elements.length)
              throw StopIteration;
            return this.elements[this.index++]
          }
        }
    }
};

        </pre>
        </div>
    </div>

    <div id="e32" class="step slide section" data-x="16500" data-y="1500" >
        <h1>Itération - generateur - yield</h1>
        <br />
        <pre class="brush: js">
            function* fibonacci() {
                let [prev, curr] = [0, 1];
                for (;;) {
                    [prev, curr] = [curr, prev + curr];
                    yield curr;
                }
            }

            for (n of fibonacci()) {
                if (n > 1000)
                    break;
                print(n);
            }
        </pre>

    </div>

    <div id="e33" class="step slide section" data-x="18000" data-y="1500" >
        <h1>Modules</h1>
        <br />
        <div class="mini">
        <pre class="brush: js">
module 'math' {
    export function sum(x, y) {
        return x + y;
    }
    export var pi = 3.141593;
}

//Dans un autre fichier
import {sum, pi} from 'math';
alert("2π = " + sum(pi, pi));

// ou
import 'math' as M;
alert("2π = " + M.sum(M.pi, M.pi));

// import à distance
import 'http://json.org/modules/json2.js' as JSON;
        </pre>
        </div>
    </div>

    <div id="e34" class="step slide section" data-x="19500" data-y="1500" >
        <h1>Création d'objet litéraux</h1>
        <br />
        <pre class="brush: js">
var obj = theProtoObj <| {
          konst:= f(), //writable, enumerable=false
          handler: defaultHandler,
          get super set name(v) {throw Error("some message")}
          source() {throw Error("another message")}
          toString() {return "d "+super.toString()}
];

 var enhancedArrayProto = Array.prototype <| {
      do (func) {return this.foreach(func)},
      search (key) {return this.indexOf(key) >= 0}
  };
  var myArray = enhancedArrayProto <| [0,1,2,3,4,5];
        </pre>
    </div>

    <div id="e35" class="step slide section" data-x="21000" data-y="1500" >
        <h1>Maximally minimal class</h1>
        <br />
        <div class="mini">
        <pre class="brush: js">
const pHealth = Name.create();

class Monster {
  constructor(name, health) {
    this.name = name;
    this[pHealth] = health;
  }

  attack(target) {
    log('The monster attacks ' + target);
  }

  get isAlive() {
    return this[pHealth] > 0;
  }

  set health(value) {
    this[pHealth] = value
  }
}

        </pre>
        </div>
    </div>

    <div id="e36" class="step slide section" data-x="22500" data-y="1500" >
        <h1>Diverses méthodes supplémentaire</h1>
        <br />
        <ul class="bulletPoint">
            <li>String.startsWith</li>
            <li>String.endWith</li>
            <li>String.contains</li>
            <li>String.toArray</li>
            <li>Number.isNaN</li>
            <li>Number.isFinite</li>
            <li>Number.isInteger</li>
            <li>Number.toInteger</li>
        </ul>
    </div>

    <div id="e37" class="step slide section" data-x="24000" data-y="1500" >
        <h1>Quasi-Literal</h1>
        <br />
        <p>Appel de fonction avec une chaîne pouvant être interpolée</p>
        <pre class="brush: js">
            msg`Welcome to ${siteName}`

            $`#element .${maClasse}`
        </pre>
    </div>

    <div id="e41" class="step slide section" data-x="0" data-y="3000">
        <h1>Ou utiliser tester certaines fonctionnalités</h1>
        <br />
        <ul class="bulletPoint">
            <li>Node, avec le flag --harmony</li>
            <li>Firefox</li>
            <li>Chrome, avec le flag "experimental javascript features"</li>
        </ul>
    </div>

    <div id="e42" class="step slide section" data-x="1500" data-y="3000">
        <h1>Ce qui fonctionne</h1>
        <br />
        <table class="browsers-features">
            <thead>
                <tr>
                    <th>Fonctionnalité</th>
                    <th>Firefox</th>
                    <th>Chrome</th>
                    <th>Node</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th> => </th>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <th>const</th>
                    <td class="ok">OK</td>
                    <td class="ok">OK</td>
                    <td class="ok">OK</td>
                </tr>
                <tr>
                    <th>let</th>
                    <td class="ok">OK</td>
                    <td class="ok">OK</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <th>default parameters</th>
                    <td class="ok">OK</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <th>rest parameters</th>
                    <td class="ok">OK</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <th>spread notation</th>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <th>Proxy</th>
                    <td>&nbsp;</td>
                    <td class="ok">OK</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <th>Map</th>
                    <td class="ok">OK</td>
                    <td>&nbsp;</td>
                    <td class="ok">OK</td>
                </tr>
                <tr>
                    <th>Set</th>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <th>for of</th>
                    <td class="ok">OK</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <th>yield</th>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <th>Module</th>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
                <tr>
                    <th>Classes</th>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div id="e43" class="step slide section" data-x="3000" data-y="3000">
        <h1>Side Note - CoffeeScript</h1>
        <br />
        <p>CoffeeScript supporte un certains nombres de ces fonctionnalités</p>
        <ul class="bulletPoint">
            <li>Syntaxe des fonctions avec <code>-></code> </li>
            <li>Paramètres par défaut</li>
            <li>Rest et spread parameters</li>
            <li>For of ; for comprehension</li>
            <li>Classes</li>
        </ul>
        <p>En fait, Coffeescript a inspiré une partie des évolutions d'EcmaScript 6</p>
    </div>

    <div id="e44" class="step slide section" data-x="4500" data-y="3000">
        <h1>Ressources</h1>
        <br />
        <ul class="bulletPoint">
            <li>Wiki harmony : <a href="http://wiki.ecmascript.org/doku.php?id=harmony:proposals">http://wiki.ecmascript.org/doku.php?id=harmony:proposals</a></li>
            <li>Table de compatibilité : <a href="http://kangax.github.com/es5-compat-table/es6/">http://kangax.github.com/es5-compat-table/es6/</a></li>
        </ul>

    </div>

    <div id="overview" class="step" data-x="8000" data-y="4000" data-scale="13">
    </div>
</div>
</body>
<script src="impress.js"></script>
<script>
    $(function () {
        impress().init();

        var $slides = $('div.slide');
        var totalNbOfSlides = $slides.length;
        $slides.each(function (index) {
            var $slide = $(this);
            var numOfSlide = index + 1;
            $slide.prepend('<div class="header"><span class="title">ECMAScript 6</span><span class="pageNumber">' + numOfSlide + '/' + totalNbOfSlides + '</span></div><br />');
            $slide.append('<div class="footer"><p>Beno&icirc;t Lemoine </p> <img src="logo_done_right-large-transparent.png" alt="xebia" /></div>');
        });

        SyntaxHighlighter.defaults['gutter'] = false;
        SyntaxHighlighter.all();
    });
</script>
</html>
